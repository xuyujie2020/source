---
title: 网络编程
---

## 七层网络协议

7.应用层 --------->TELNET,SSH,HTTP,HTML

6.表示层---------->↑

5.会话层---------->↑

4.传输层---------->TCP，UDP......

3.网络层---------->IPv4，IPv6(IP地址),路由器

2.数据链路层---------->无线网，光纤....

1.物理层---------------->  ↑

## TCP/IP协议知识点

#### 三次握手和四次挥手

##### 三次握手

tcp通信需要确保双方都具有数据收发的能力，得到ACK响应则认为对方具有数据收发的能力，

客户端“喂，我能发送，你能听到吗？”

服务端“我听得到，我也能发送，你听得到吗？”

客户端“我听得到，我们可以通信了”

##### 为什么三次？

两次不安全，四次太麻烦

第一次第二次不能携带数据，**第三次可以携带数据**

四次挥手



## IO模型

阻塞IO(blocking IO)

非阻塞IO(nonblocking IO)

I/O多路复用(I/O multiplexing)

异步 IO(Asynchronous I/O)

信号驱动 IO(signal driven I/O， SIGIO)

## TCP通信

#### 服务端建立TCP连接步骤：

1.建立一个服务端的socket，并且设置socket属性（IP地址，端口）

2.bind绑定socket指定的通信对象

3.listen监听连接

4.使用accept等待连接

5.使用recv和send发送消息

6.关闭socket套接字

#### 客户端建立TCP连接步骤：

1.建立客户端的socket，设置IP地址和端口号

2.使用connect进行TCP连接

3.使用recv和send发送消息

4.关闭socket





## 服务器之间的连接

### IP地址

公网地址：为外网地址，允许其他网络的用户进行访问

## 客户端与服务端

客户端使用connect发起一个连接

服务端使用accept和listen监听一个连接请求



## select,poll和epoll区别

- select和poll一样，都是对所选fd进行轮询
- select连接数有限制（1024上限，可修改上限的宏定义），poll没有（poll可以用链表存储）
- 因为采用轮询所以性能会比较差，但是连接数量少时，poll可能更快一些

epoll的机制为callback回调机制，可以理解为event poll，epoll会把哪个流发生了怎样的I/O事件通知我们。所以我们说epoll实际上是**事件驱动（每个事件关联上fd）**的，**select，poll，epoll本质上都是同步I/O，因为他们都需要在读写事件就绪后自己负责进行读写，也就是说这个读写过程是阻塞的**

## 限流（令牌桶）

## UDP

#### 怎么保证UDP的可靠传输?

超时重传机制，确认序列号(每个包添加序号，保证消息包的顺序)

## 心跳机制

